generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Users {
    id           String      @id @default(uuid())
    sub_firebase String      @unique
    full_name    String
    status       USER_STATUS @default(ACTIVE)
    customer     Customers?
    createdAt    DateTime    @default(now())
}

model Customers {
    id                String             @id @default(uuid())
    name              String
    vat               String             @unique
    phone_number      String
    user_id           String             @unique
    user              Users              @relation(fields: [user_id], references: [id])
    send_messages     SendMessages[]
    template_messages TemplateMessages[]
    createdAt         DateTime           @default(now())
}

model SendMessages {
    id              String         @id @default(uuid())
    message_text    String
    whatsapp_number String
    status          MESSAGE_STATUS @default(PENDING)
    customer_id     String
    customer        Customers      @relation(fields: [customer_id], references: [id])
    createdAt       DateTime       @default(now())
}

model TemplateMessages {
    id                    String    @id @default(uuid())
    message_text_template String
    customer_id           String
    customer              Customers @relation(fields: [customer_id], references: [id])
    createdAt             DateTime  @default(now())
}

enum MESSAGE_STATUS {
    SENT
    NOT_SENT
    PENDING
    VIEWED
    CANCELED
}

enum USER_STATUS {
    ACTIVE
    DISABLED
}
