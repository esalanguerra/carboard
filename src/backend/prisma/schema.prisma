generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum MESSAGE_STATUS {
  SENT
  NOT_SENT
  PENDING
  VIEWED
  CANCELED
}

enum USER_STATUS {
  ACTIVE
  DISABLED
}

model User {
  id                String             @id @default(auto()) @map("_id") @db.ObjectId
  sub_firebase      String             @unique
  full_name         String
  vat               String             @unique
  phone_number      String
  send_messages     SendMessages[]
  template_messages TemplateMessages[]
  status            USER_STATUS        @default(ACTIVE)
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
}

model SendMessages {
  id              String         @id @default(auto()) @map("_id") @db.ObjectId
  message_text    String
  whatsapp_number String
  car_id          String?        @db.ObjectId
  car             Car?           @relation(fields: [car_id], references: [id])
  status          MESSAGE_STATUS @default(PENDING)
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  user            User?          @relation(fields: [user_id], references: [id])
  user_id         String?        @db.ObjectId
}

model TemplateMessages {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  message_text_template String
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  user                  User?    @relation(fields: [user_id], references: [id])
  user_id               String?  @db.ObjectId
}

model Car {
  id             String         @id @default(auto()) @map("_id") @db.ObjectId
  id_car         String         @unique
  name           String
  owners         String?
  seller         String
  price          Int
  condition      String?
  mileage        String
  images         String[]
  phone          String
  engine         String
  year           Int
  gearbox        String
  inspected      String?
  driveType      String?
  plate          String
  power          String?
  topSpeed       String?
  acceleration   String?
  numberOfPeople Int?
  numberOfDoors  Int?
  safety         String[]
  interior       String[]
  electronics    String[]
  additionalInfo String?
  others         String?
  link           String?
  messages       SendMessages[]
  createdAt      DateTime?      @default(now())
  updatedAt      DateTime?      @updatedAt

  @@map("cars")
}
